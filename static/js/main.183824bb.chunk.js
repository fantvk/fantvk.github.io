(this["webpackJsonprevolut-test-task"]=this["webpackJsonprevolut-test-task"]||[]).push([[0],{110:function(e,t,a){e.exports={wrapper:"styles_wrapper__1Z7CT",breadcrumb:"styles_breadcrumb__3VUzs",content:"styles_content__1Fng8"}},111:function(e,t,a){e.exports={app:"styles_app__1jJpR",header:"styles_header__3SREE",footer:"styles_footer__3_8JA"}},170:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return f}));var n=a(140),r=a.n(n),c=a(193),l=a(17),u=a(141),o=a(0),s=a(11),i=a(83),m=a.n(i);function f(t,a){var n=function(e){return Object(o.useMemo)((function(){return{fromCurrency:e[0],toCurrency:e[1]}}),[e])}(a),i=Object(o.useState)(n.fromCurrency),f=Object(l.a)(i,2),b=f[0],p=f[1],y=Object(o.useState)(n.toCurrency),d=Object(l.a)(y,2),E=d[0],v=d[1],h=function(t){var a=Object(o.useState)(null),n=Object(l.a)(a,2),u=n[0],i=n[1];return Object(o.useEffect)((function(){var a=function(){var e=Object(c.a)(r.a.mark((function e(){var a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://api.exchangeratesapi.io","/latest?base=").concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,c=Object(s.get)(["rates"],n),"EUR"===t&&(c.EUR=1),i(c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),n=e.setInterval(a,"10000");return a(),function(){i(null),e.clearInterval(n)}}),[t]),u}(b),j=function(e){return Object(o.useCallback)((function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=r[t];if(!c||c<0)return e.setFieldsValue(Object(u.a)({},a,null));e.setFieldsValue(Object(u.a)({},a,m()(c).multiply(n).value))}),[e])}(t),O=function(e,t,a,n){return Object(o.useCallback)((function(r,c){if(t){if((Object(s.has)("from",r)||Object(s.has)("toCurrency",r))&&e("from","to",t[c.toCurrency],c),Object(s.has)("to",r)){var l=1/t[c.toCurrency];e("to","from",l,c)}Object(s.has)("fromCurrency",r)&&(a(r.fromCurrency),e("from","to",null)),Object(s.has)("toCurrency",r)&&n(r.toCurrency)}}),[e,t,a,n])}(j,h,p,v);return function(e,t,a){Object(o.useEffect)((function(){if(e){var n=t.getFieldsValue();a("from","to",e[n.toCurrency],n)}}),[e,t,a])}(h,t,j),[n,O,h,b,E]}}).call(this,a(48))},178:function(e,t,a){e.exports={logo:"styles_logo__2Al_l"}},180:function(e,t,a){e.exports={entity:"styles_entity__3nA1B"}},192:function(e,t,a){e.exports={select:"styles_select__115v6"}},201:function(e,t,a){e.exports=a(378)},210:function(e,t,a){},378:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),l=a.n(c),u=a(21),o=a(54),s=a(3),i=(a(210),a(52)),m=a(77),f=Object(i.b)({name:"app",initialState:{balance:{USD:1e3}},reducers:{setBalance:function(e,t){var a=t.payload,n=a.currency,r=a.value;e.balance[n]=r}}}),b=f.actions.setBalance,p=f.reducer,y=a(11),d=Object(i.b)({name:"app",initialState:{entities:[]},reducers:{createEntity:function(e,t){var a=t.payload,n=a.id,r=a.timestamp,c=a.type,l=a.currency,u=a.amount,o=a.title,s=a.balance,i={id:n||Object(y.uniqueId)(),type:c||"revenue",timestamp:r||Date.now(),currency:l,amount:u,title:o,balance:s};e.entities.push(i)}}}),E=d.actions.createEntity,v=d.reducer,h=Object(i.a)({reducer:{app:p,history:v},middleware:[m.a]}),j=a(47),O=a(379),g=a(385),C=a(110),_=a.n(C);function x(e){var t=e.breadcrumbItems,a=e.children;return r.a.createElement(O.a.Content,{className:_.a.wrapper},r.a.createElement(g.a,{className:_.a.breadcrumb},t.map((function(e,t){return r.a.createElement(g.a.Item,{key:t,children:e})}))),r.a.createElement("div",{className:_.a.content},a))}x.defaultProps={breadcrumbItems:[]};var w=a(178),I=a.n(w);function k(){return r.a.createElement("div",{className:I.a.logo})}var N=a(17),S=a(143),B=a(391),F=a(390);function R(){var e=Object(n.useState)(!1),t=Object(N.a)(e,2),a=t[0],c=t[1],l=Object(j.h)().pathname;return r.a.createElement(O.a.Sider,{collapsible:!0,collapsed:a,onCollapse:c},r.a.createElement(k,null),r.a.createElement(S.a,{theme:"dark",selectedKeys:[l],mode:"inline"},r.a.createElement(S.a.Item,{key:"/"},r.a.createElement(o.b,{to:"/"},r.a.createElement(B.a,null),r.a.createElement("span",null,"Account"))," "),r.a.createElement(S.a.Item,{key:"/exchange"},r.a.createElement(o.b,{to:"/exchange"},r.a.createElement(F.a,null),r.a.createElement("span",null,"Exchange"))," ")))}var U=a(381),q=a(382),A=a(387),T=a(389),V=a(2),D=a.n(V),J=r.a.memo((function(e){var t=e.value,a=e.currency;return new Intl.NumberFormat("en-UK",{style:"currency",currency:a}).format(t)}));J.propTypes={value:D.a.number.isRequired,currency:D.a.string.isRequired};var $=Object(y.get)(["app"]),z=Object(y.flow)($,Object(y.get)(["balance"])),M=function(e,t){return Object(y.flow)(z,Object(y.getOr)(0,[t]))(e)},W=a(383),G=a(380),H=a(146),K=Object(y.get)(["history"]),P=Object(y.flow)(K,Object(y.get)(["entities"])),Y=Object(H.a)(P,(function(e,t){return t}),(function(e,t){return Object(y.flow)(Object(y.filter)({currency:t}),Object(y.orderBy)("timestamp","desc"))(e)})),L=a(180),Z=a.n(L);function Q(e){var t=e.currency,a=Object(u.d)((function(e){return Y(e,t)}));return r.a.createElement(W.a,{dataSource:a,renderItem:function(e){var t=e.id,a=e.type,n=e.title,c=e.timestamp,l=e.currency,u=e.amount;return r.a.createElement(W.a.Item,{key:t,className:Z.a.entity},r.a.createElement(W.a.Item.Meta,{avatar:r.a.createElement(G.a,{icon:r.a.createElement(F.a,null)}),title:n,description:new Date(c).toLocaleString()}),r.a.createElement("div",null,function(e){switch(e){case"revenue":return"+";case"cost":return"-";default:return""}}(a)," ",r.a.createElement(J,{value:u,currency:l})))}})}var X=a(86),ee=a.n(X);function te(e){var t=e.currencies,a=function(e){var t=Object(n.useState)(e[0]),a=Object(N.a)(t,2),r=a[0],c=a[1];return[r,Object(n.useCallback)((function(e){c(e.target.value)}),[c])]}(t),c=Object(N.a)(a,2),l=c[0],o=c[1],s=Object(u.d)((function(e){return M(e,l)}));return r.a.createElement(x,{breadcrumbItems:["App","Account"]},r.a.createElement(U.a,null,r.a.createElement(q.a,{span:24,className:ee.a.col},r.a.createElement(A.a.Group,{value:l,onChange:o},t.map((function(e){return r.a.createElement(A.a.Button,{key:e,value:e},e)}))))),r.a.createElement(U.a,null,r.a.createElement(q.a,{span:24,className:ee.a.col},r.a.createElement(T.a,{color:"blue",className:ee.a.balance},r.a.createElement(J,{currency:l,value:s})))),r.a.createElement(U.a,null,r.a.createElement(q.a,{offset:6,span:12,className:ee.a.col},r.a.createElement(Q,{currency:l}))))}var ae=a(386),ne=a(144),re=a(199),ce=a(384);function le(e,t){if(!e)return e;var a=e.toString().split(".")[1];if(a&&a.length>2)return t;var n=Number(e);return isNaN(n)?e:n}function ue(e){var t=e.currency,a=e.name,n=e.label,c=e.max,l=e.addonBefore,o=Object(re.a)(e,["currency","name","label","max","addonBefore"]),s=Object(u.d)((function(e){return M(e,t)}));return r.a.createElement(ae.a.Item,{name:a,label:n,normalize:le,rules:[{required:!0,type:"number",min:.01,max:c?s:null}],extra:r.a.createElement(r.a.Fragment,null,"You have ",r.a.createElement(J,{value:s,currency:t}))},r.a.createElement(ce.a,Object.assign({addonBefore:l,type:"number",step:.01,min:.01,max:c&&s},o)))}var oe=a(84),se=a(192),ie=a.n(se);function me(e){var t=e.name,a=e.currencies;return r.a.createElement(ae.a.Item,{name:t,noStyle:!0},r.a.createElement(oe.a,{className:ie.a.select},a.map((function(e){return r.a.createElement(oe.a.Option,{key:e,value:e},e)}))))}var fe=a(185);function be(e){var t=e.fromCurrency,a=e.toCurrency,n=e.rates;return r.a.createElement(T.a,{color:"blue"},n?r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{value:1,currency:t})," = ",r.a.createElement(J,{value:n[a],currency:a})):r.a.createElement(fe.a,{size:"small"}))}var pe=a(170),ye=a(388),de=a(83),Ee=a.n(de);function ve(){var e=Object(j.g)(),t=Object(u.c)();return Object(n.useCallback)((function(a){t(function(e,t){return function(a,n){var r=e.fromCurrency,c=e.toCurrency,l=e.from,o=e.to;if(r!==c){var s=M(n(),r),i=M(n(),c),m=Ee()(s).subtract(l).value,f=Ee()(i).add(o).value;Object(u.b)((function(){a(b({currency:r,value:m})),a(E({type:"cost",currency:r,amount:l,title:"Currency exchange to ".concat(c),balance:m})),a(b({currency:c,value:f})),a(E({currency:c,amount:o,title:"Currency exchange from ".concat(r),balance:f}))})),t.push("/"),ye.a.success("Successfully exchanged currency")}else ye.a.warning("Can't exchange to same currency")}}(a,e))}),[t,e])}var he={labelCol:{offset:4,span:4},wrapperCol:{span:8}},je={wrapperCol:{offset:8,span:8}};function Oe(e){var t=e.currencies,a=ae.a.useForm(),n=Object(N.a)(a,1)[0],c=ve(),l=Object(pe.a)(n,t),u=Object(N.a)(l,5),o=u[0],s=u[1],i=u[2],m=u[3],f=u[4];return r.a.createElement(x,{breadcrumbItems:["App","Exchange"]},r.a.createElement(ae.a,Object.assign({},he,{form:n,initialValues:o,onFinish:c,onValuesChange:s,noValidate:!0}),r.a.createElement(ae.a.Item,je,r.a.createElement(be,{fromCurrency:m,toCurrency:f,rates:i})),r.a.createElement(ue,{name:"from",label:"From",currency:m,addonBefore:r.a.createElement(me,{name:"fromCurrency",currencies:t}),autoFocus:!0,max:!0}),r.a.createElement(ue,{name:"to",label:"To",currency:f,addonBefore:r.a.createElement(me,{name:"toCurrency",currencies:t})}),r.a.createElement(ae.a.Item,je,r.a.createElement(ne.a,{type:"primary",htmlType:"submit"},"Exchange"))))}var ge=a(111),Ce=a.n(ge),_e=(new Date).getFullYear(),xe=Object(y.split)(",","USD,EUR,GBP");Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(u.a,{store:h},r.a.createElement(o.a,null,r.a.createElement(s.a,{form:{validateMessages:{required:"This field is required.",number:{min:"This field is invalid (should be greater than ${min})",range:"This field is invalid (should be between ${min} and ${max})"}}}},r.a.createElement((function(){return r.a.createElement(O.a,{className:Ce.a.app},r.a.createElement(R,null),r.a.createElement(O.a,null,r.a.createElement(O.a.Header,{className:Ce.a.header}),r.a.createElement(j.d,null,r.a.createElement(j.b,{exact:!0,path:"/"},r.a.createElement(te,{currencies:xe})),r.a.createElement(j.b,{path:"/exchange"},r.a.createElement(Oe,{currencies:xe})),r.a.createElement(j.a,{to:"/"})),r.a.createElement(O.a.Footer,{className:Ce.a.footer},"Revolut \xa9 ",_e)))}),null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},86:function(e,t,a){e.exports={col:"styles_col__2qIas",balance:"styles_balance__3WHU0"}}},[[201,1,2]]]);
//# sourceMappingURL=main.183824bb.chunk.js.map